# 2024.05.28 13주차 강의 내용 정리
<h3><b>강의 내용</b></h3>
<ul>
  <li>bash shell은 명령어를 어떻게 처리할까?</li>
  <li>passwd 명령어</li>
  <li>예약된 명령어</li>
  <li>fork()</li>
  <li>exec()</li>
</ul><hr>

<h3><b>bash shell은 명령어를 어떻게 처리할까?</b></h3>
우리가 내리는 명령어를 처리하는 처리기는 bash shell 이다.<br>
그럼 이 쉘은 어떻게 명령어를 처리해줄까?<br><br>

먼저 쉘에 임의의 명령어가 실행되었다고 가정해보자.
현재 디렉토리에 있는 파일, 디렉토리를 확인하기 위해 ls 명령어를 입력시키면<br>
ls 명령어 또한 하나의 프로세스로서 실행된다<br><br>
그리고 이 프로세스의 부모 프로세스가 배시 쉘 프로세스로 지정되어 동작한다.<br>

<h3><b>passwd 명령어</b></h3>
일반적으로 쉘에 내리는 명령어는 쉘의 자식 프로세스로 fork()되어<br>
해당 프로세스가 동작함으로써 처리된다.<br>
그러나 passwd 명령어는 root 사용자의 권한으로만 실행될 수 있는 명령어이다.<br><br>

따라서 passwd 명령어를 실행 시, 현재 사용자에게<br>
root 사용자 급의 권한을 임시로 부여하여 해당 명령어를 실행할 수 있도록 한다<br>

<h3><b>예약된 명령어</b></h3>
프로세스를 실행시켰을 때 리턴되는 리턴값은 다양하다.<br>
개중에 정상 종료를 의미하는 리턴값은 0인데,<br>
0 이외에 다른 값이 리턴될 경우 프로세스 상에 어떠한 문제로 인해<br>
오류가 발생되었을 가능성이 높다.<br><br>

이런 경우가 발생했을 때 다른 명령어로 대체해서 실행할 수 있도록 하는 것이 예약된 명령어, $0이다.<br>

<h3><b>fork()</b></h3>
fork()된 자식 프로세스가 실행될 경우, 특수하게 2번 리턴한 후 배시 쉘로 돌아오게 된다.<br>
종료된 자식 프로세스가 부모 프로세스에게 한 번 리턴,<br>
그 부모 프로세스가 bash shell의 자식 프로세스이므로 한 번 더 리턴을 하게 된다<br>

그래서 리턴 횟수가 예외적으로 2번이다.<br>
참고로 pid가 더 빠른 프로세스가 부모 프로세스, 느린 프로세스가 자식 프로세스이다.<br>

<h3><b>exec()</b></h3>
fork() 하고나면 자식 프로세스는 부모 프로세스와 똑같은 코드를 실행하게 된다.<br>
자식 프로세스에게 새로운 프로그램을 실행하도록 하려면<br>
exec() 시스템 호출을 사용해서 프로세스 내의 프로그램을 새 프로그램으로 대치할 수 있다.<br>
-> 자기대치인 셈
